{% extends "CU/base.html" %}

{% block body %}
<h3 class="text-center m-4">Editează Certificatul de urbanism</h3>
{% if success %}
<div class="alert alert-success" role="alert">
    Certificatul de urbanism a fost editat cu succes!
    <a href="{% url 'index_CU' lucrare.id %}" class="alert-link">Mergi la pagina principală.</a>
</div>
{% else %}
<div class="row justify-content-center">
    <div class="col-6">
        <div class="card bg-light mb-3">
            <div class="card-header">
                <i class="fa-solid fa-pen-to-square fa-lg"></i> Editează Certificatul de urbanism
            </div>
            <div class="card-body">
                <form method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <!-- Numar -->
                    <div class="form-group">
                        <label for="{{ form.numar.id_for_label }}">{{ form.numar.label }}</label>
                        {{ form.numar }}
                        {% if form.numar.errors %}
                        <div class="invalid-feedback">
                            {{ form.numar.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Data -->
                    <div class="form-group">
                        <label for="{{ form.data.id_for_label }}">{{ form.data.label }}</label>
                        {{ form.data }}
                        {% if form.data.errors %}
                        <div class="invalid-feedback">
                            {{ form.data.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Emitent -->
                    <div class="form-group">
                        <label for="{{ form.emitent.id_for_label }}">{{ form.emitent.label }}</label>
                        {{ form.emitent }}
                        {% if form.emitent.errors %}
                        <div class="invalid-feedback">
                            {{ form.emitent.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Nume lucrare -->
                    <div class="form-group">
                        <label for="{{ form.nume.id_for_label }}">{{ form.nume.label }}</label>
                        {{ form.nume }}
                        {% if form.nume.errors %}
                        <div class="invalid-feedback">
                            {{ form.nume.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Valabilitate -->
                    <div class="form-group">
                        <label for="{{ form.valabilitate.id_for_label }}">{{ form.valabilitate.label }}</label>
                        {{ form.valabilitate }}
                        {% if form.valabilitate.errors %}
                        <div class="invalid-feedback">
                            {{ form.valabilitate.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Descrierea proiectului -->
                    <div class="form-group">
                        <label for="{{ form.descrierea_proiectului.id_for_label }}">
                            {{ form.descrierea_proiectului.label }}
                        </label>
                        {{ form.descrierea_proiectului }}
                        {% if form.descrierea_proiectului.errors %}
                        <div class="invalid-feedback">
                            {{ form.descrierea_proiectului.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Inginer intocmit -->
                    <div class="form-group">
                        <label for="{{ form.inginer_intocmit.id_for_label }}">
                            {{ form.inginer_intocmit.label}}
                        </label>
                        {{ form.inginer_intocmit }}
                        {% if form.inginer_intocmit.errors %}
                        <div class="invalid-feedback">
                            {{ form.inginer_intocmit.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Inginer verificat -->
                    <div class="form-group">
                        <label for="{{ form.inginer_verificat.id_for_label }}">
                            {{ form.inginer_verificat.label}}
                        </label>
                        {{ form.inginer_verificat }}
                        {% if form.inginer_verificat.errors %}
                        <div class="invalid-feedback">
                            {{ form.inginer_verificat.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Suprafata ocupata -->
                    <div class="form-group">
                        <label for="{{ form.suprafata_ocupata.id_for_label }}">
                            {{ form.suprafata_ocupata.label }}
                        </label>
                        {{ form.suprafata_ocupata }}
                        {% if form.suprafata_ocupata.errors %}
                        <div class="invalid-feedback">
                            {{ form.suprafata_ocupata.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Lungime traseu -->
                    <div class="form-group">
                        <label for="{{ form.lungime_traseu.id_for_label }}">
                            {{ form.lungime_traseu.label}}
                        </label>
                        {{ form.lungime_traseu }}
                        {% if form.lungime_traseu.errors %}
                        <div class="invalid-feedback">
                            {{ form.lungime_traseu.errors }}
                        </div>
                        {% endif %}
                    </div>
                    <!-- Cale Certificat de urbanism -->
                    <div class="form-group">
                        <label for="{{ form.cale_CU.id_for_label }}">
                            {{ form.cale_CU.label }}
                        </label>
                        {% if form.instance.cale_CU %}
                        <p class="mt-2">
                            Fișier existent:
                            <a href="{{ form.instance.cale_CU.url }}" target="_blank">
                                {{ form.instance.cale_CU.name }}
                            </a>
                        </p>
                        {% endif %}
                        {{ form.cale_CU }}
                        {% if form.cale_CU.errors %}
                        <div class="invalid-feedback">
                            {{ form.cale_CU.errors }}
                        </div>
                        {% endif %}
                    </div>

                    <button type="submit" class="btn btn-primary">Editează</button>
                    <a href="{% url 'index_CU' lucrare.id %}" class="btn btn-secondary">Anulează</a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}